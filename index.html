<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PAPERHOUSE INC</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        .page { display: none; }
        .active { display: block; }
    </style>
</head>
<body class="bg-gray-900 text-white font-sans">

    <!-- Header / User Info -->
    <div class="p-4 bg-gray-800 flex justify-between items-center border-b border-yellow-500">
        <div>
            <p id="user-display-name" class="font-bold text-yellow-400">Loading User...</p>
            <p class="text-xs text-gray-400">Balance: <span id="main-balance" class="text-green-400">0.00</span> PHP</p>
        </div>
        <h1 class="text-xl font-black">PAPERHOUSE</h1>
    </div>

    <!-- Navigation Menu -->
    <div id="main-menu" class="p-4 grid grid-cols-2 gap-4 active page">
        <button onclick="showPage('chat-page')" class="bg-blue-600 p-4 rounded-lg font-bold">üìò ELEMENTARY CHAT üìò</button>
        <button onclick="showPage('referral-page')" class="bg-orange-600 p-4 rounded-lg font-bold">üç∫ Referrals üç∫</button>
        <button onclick="showPage('withdraw-page')" class="bg-green-600 p-4 rounded-lg font-bold">ü§ë WITHDRAW ü§ë</button>
        <button onclick="showPage('leaderboard-page')" class="bg-purple-600 p-4 rounded-lg font-bold">üç∫ TOP LEADERBOARD üç∫</button>
        <button onclick="showPage('admin-login')" class="bg-red-700 p-4 rounded-lg font-bold col-span-2">üéñ OWNER DASHBOARD üéñ</button>
    </div>

    <!-- Chat Page -->
    <div id="chat-page" class="page p-4">
        <button onclick="showPage('main-menu')" class="mb-4 text-sm text-yellow-500 underline">‚Üê Back</button>
        <h2 class="text-xl mb-2">Elementary Chat</h2>
        <div id="chat-box" class="h-64 bg-gray-800 overflow-y-auto p-2 rounded mb-4 text-sm"></div>
        <div class="flex flex-col gap-2">
            <input id="chat-input" type="text" placeholder="Type a message..." class="p-2 rounded bg-gray-700 text-white">
            <p class="text-[10px] text-gray-400">Sending shows 3 ads. Reward: 0.015 PHP. Cooldown: 3m.</p>
            <button id="send-msg-btn" onclick="handleSendMessage()" class="bg-blue-500 p-2 rounded font-bold">Send Message (Watch Ads)</button>
        </div>
    </div>

    <!-- Referral Page -->
    <div id="referral-page" class="page p-4">
<button onclick="showPage('main-menu')" class="mb-4 text-sm text-yellow-500 underline">‚Üê Back</button>
        <h2 class="text-xl mb-2">Referral System</h2>
        <div class="bg-gray-800 p-4 rounded mb-4 text-center">
            <p>Your Code: <span id="my-ref-code" class="text-yellow-400 font-mono">...</span></p>
        </div>
        <div class="bg-gray-800 p-4 rounded mb-4">
            <input id="input-ref-code" type="text" placeholder="Enter referral code" class="w-full p-2 rounded bg-gray-700 mb-2">
            <button onclick="activateReferral()" class="w-full bg-orange-500 p-2 rounded font-bold">Activate Code</button>
        </div>
        <div class="bg-gray-800 p-4 rounded">
            <p>Claimable Bonus: <span id="claimable-bonus" class="text-green-400">0.00</span> PHP</p>
            <button onclick="claimBonus()" class="w-full mt-2 bg-green-600 p-2 rounded font-bold">Claim 8% Bonus</button>
        </div>
    </div>

    <!-- Withdraw Page -->
    <div id="withdraw-page" class="page p-4">
        <button onclick="showPage('main-menu')" class="mb-4 text-sm text-yellow-500 underline">‚Üê Back</button>
        <h2 class="text-xl mb-2">Withdraw GCash</h2>
        <div class="bg-gray-800 p-4 rounded">
            <input id="wd-amount" type="number" placeholder="Amount" class="w-full p-2 rounded bg-gray-700 mb-2">
            <input id="wd-number" type="text" placeholder="GCash Number" class="w-full p-2 rounded bg-gray-700 mb-2">
            <button onclick="requestWithdrawal()" class="w-full bg-green-500 p-2 rounded font-bold">Submit Request</button>
        </div>
        <div class="mt-4">
            <h3 class="text-sm font-bold mb-2">Withdrawal History</h3>
            <div id="wd-history" class="text-xs bg-gray-800 p-2 rounded h-32 overflow-y-auto"></div>
        </div>
    </div>

    <!-- Leaderboard Page -->
    <div id="leaderboard-page" class="page p-4">
        <button onclick="showPage('main-menu')" class="mb-4 text-sm text-yellow-500 underline">‚Üê Back</button>
        <h2 class="text-xl mb-2 text-center text-purple-400">TOP 500 EARNERS</h2>
        <div class="overflow-x-auto">
            <table class="w-full text-left text-xs bg-gray-800 rounded">
                <thead>
                    <tr class="bg-gray-700">
                        <th class="p-2">Rank</th>
                        <th class="p-2">User</th>
                        <th class="p-2">Earnings</th>
                    </tr>
                </thead>
                <tbody id="leaderboard-table"></tbody>
            </table>
        </div>
    </div>

    <!-- Owner Login -->
    <div id="admin-login" class="page p-4">
        <button onclick="showPage('main-menu')" class="mb-4 text-sm text-yellow-500 underline">‚Üê Back</button>
        <h2 class="text-xl mb-4">Admin Access</h2>
        <input id="admin-pw" type="password" placeholder="Enter Password" class="w-full p-2 rounded bg-gray-700 mb-4">
        <button onclick="checkAdmin()" class="w-full bg-red-600 p-2 rounded font-bold">Enter Dashboard</button>
    </div>

    <!-- Owner Dashboard -->
    <div id="owner-dashboard" class="page p-4">
        <button onclick="showPage('main-menu')" class="mb-4 text-sm text-yellow-500 underline">‚Üê Back</button>
        <h2 class="text-xl mb-2">Pending Withdrawals</h2>
        <div id="admin-wd-list" class="space-y-2"></div>
    </div>

    <!-- Firebase SDKs -->
    <script type="module" src="app.js"></script>
</body>
</html>
